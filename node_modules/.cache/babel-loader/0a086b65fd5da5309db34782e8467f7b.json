{"ast":null,"code":"import _objectSpread from \"/Users/nuoee/Desktop/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport axios from 'axios';\nimport http from '../utils/http';\nconst ORDER_ID = 'ORDER_ID';\nconst initState = {\n  orderId: ''\n};\nexport function exchange(state = initState, action) {\n  switch (action.type) {\n    case ORDER_ID:\n      console.log(action.payload);\n      return _objectSpread({}, state, {\n        orderId: action.payload.orderId\n      });\n\n    default:\n      return state;\n  }\n}\n\nfunction saveOrderId(orderId) {\n  return {\n    type: ORDER_ID,\n    payload: {\n      orderId\n    }\n  };\n}\n\nexport function readMsg(from) {\n  return (dispatch, getState) => {\n    axios.post('/user/readmsg', {\n      from\n    }).then(res => {\n      const userid = getState().user._id;\n\n      if (res.status == 200 && res.data.code == 0) {\n        dispatch(msgRead({\n          userid,\n          from,\n          num: res.data.num\n        }));\n      }\n    });\n  };\n}\nexport function createOrder(data) {\n  return async dispatch => {\n    http.post('exchange-trade-server/order/createOrder', data).then(res => {\n      if (res.code === 200) {\n        dispatch(saveOrderId(res.data.data));\n        this.props.history.push('/pay');\n      } else if (res.code === -1) {\n        dispatch(saveOrderId('270'));\n      } else if (res.code === -8) {} else if (res.code === -10) {\n        console.log('去登陆', res.code);\n      }\n    });\n  };\n}","map":{"version":3,"sources":["/Users/nuoee/Desktop/react-demo/src/redux/exchange.redux.js"],"names":["axios","http","ORDER_ID","initState","orderId","exchange","state","action","type","console","log","payload","saveOrderId","readMsg","from","dispatch","getState","post","then","res","userid","user","_id","status","data","code","msgRead","num","createOrder","props","history","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,MAAMC,QAAQ,GAAG,UAAjB;AACA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,OAAO,EAAE;AADO,CAAlB;AAIA,OAAO,SAASC,QAAT,CAAkBC,KAAK,GAACH,SAAxB,EAAmCI,MAAnC,EAA0C;AAChD,UAAOA,MAAM,CAACC,IAAd;AACC,SAAKN,QAAL;AACCO,MAAAA,OAAO,CAACC,GAAR,CAAYH,MAAM,CAACI,OAAnB;AACA,+BAAWL,KAAX;AAAiBF,QAAAA,OAAO,EAACG,MAAM,CAACI,OAAP,CAAeP;AAAxC;;AACD;AACC,aAAOE,KAAP;AALF;AAOA;;AACD,SAASM,WAAT,CAAqBR,OAArB,EAA6B;AAC5B,SAAO;AAACI,IAAAA,IAAI,EAAEN,QAAP;AAAiBS,IAAAA,OAAO,EAAC;AAACP,MAAAA;AAAD;AAAzB,GAAP;AACA;;AACD,OAAO,SAASS,OAAT,CAAiBC,IAAjB,EAAsB;AAC5B,SAAO,CAACC,QAAD,EAAUC,QAAV,KAAqB;AAC3BhB,IAAAA,KAAK,CAACiB,IAAN,CAAW,eAAX,EAA2B;AAACH,MAAAA;AAAD,KAA3B,EACEI,IADF,CACOC,GAAG,IAAE;AACV,YAAMC,MAAM,GAAGJ,QAAQ,GAAGK,IAAX,CAAgBC,GAA/B;;AACA,UAAIH,GAAG,CAACI,MAAJ,IAAY,GAAZ,IAAmBJ,GAAG,CAACK,IAAJ,CAASC,IAAT,IAAe,CAAtC,EAAyC;AACxCV,QAAAA,QAAQ,CAACW,OAAO,CAAC;AAACN,UAAAA,MAAD;AAAQN,UAAAA,IAAR;AAAaa,UAAAA,GAAG,EAACR,GAAG,CAACK,IAAJ,CAASG;AAA1B,SAAD,CAAR,CAAR;AACA;AACD,KANF;AAOA,GARD;AASA;AAED,OAAO,SAASC,WAAT,CAAqBJ,IAArB,EAA0B;AAChC,SAAO,MAAMT,QAAN,IAAgB;AAChBd,IAAAA,IAAI,CAACgB,IAAL,CAAU,yCAAV,EAAqDO,IAArD,EAA2DN,IAA3D,CAAgEC,GAAG,IAAI;AACrE,UAAIA,GAAG,CAACM,IAAJ,KAAa,GAAjB,EAAsB;AAC1BV,QAAAA,QAAQ,CAACH,WAAW,CAACO,GAAG,CAACK,IAAJ,CAASA,IAAV,CAAZ,CAAR;AACA,aAAKK,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,MAAxB;AACA,OAHI,MAGE,IAAIZ,GAAG,CAACM,IAAJ,KAAa,CAAC,CAAlB,EAAqB;AAC3BV,QAAAA,QAAQ,CAACH,WAAW,CAAC,KAAD,CAAZ,CAAR;AACA,OAFM,MAEA,IAAIO,GAAG,CAACM,IAAJ,KAAa,CAAC,CAAlB,EAAqB,CACtB,CADC,MACK,IAAIN,GAAG,CAACM,IAAJ,KAAa,CAAC,EAAlB,EAAsB;AAC3BhB,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBS,GAAG,CAACM,IAAvB;AACD;AACF,KAVD;AAWN,GAZD;AAaA","sourcesContent":["import axios from 'axios'\nimport http from '../utils/http'\nconst ORDER_ID = 'ORDER_ID'\nconst initState = {\n  orderId: ''\n}\n\nexport function exchange(state=initState, action){\n\tswitch(action.type){\n\t\tcase ORDER_ID:\n\t\t\tconsole.log(action.payload)\n\t\t\treturn {...state,orderId:action.payload.orderId}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\nfunction saveOrderId(orderId){\n\treturn {type: ORDER_ID, payload:{orderId}}\n}\nexport function readMsg(from){\n\treturn (dispatch,getState)=>{\n\t\taxios.post('/user/readmsg',{from})\n\t\t\t.then(res=>{\n\t\t\t\tconst userid = getState().user._id\n\t\t\t\tif (res.status==200 && res.data.code==0) {\n\t\t\t\t\tdispatch(msgRead({userid,from,num:res.data.num}))\n\t\t\t\t}\n\t\t\t})\n\t}\n}\n\nexport function createOrder(data){\n\treturn async dispatch=>{\n        http.post('exchange-trade-server/order/createOrder', data).then(res => {\n          if (res.code === 200) {\n\t\t\t\t\t\tdispatch(saveOrderId(res.data.data))\n\t\t\t\t\t\tthis.props.history.push('/pay')\n\t\t\t\t\t} else if (res.code === -1) {\n\t\t\t\t\t\tdispatch(saveOrderId('270'))\n\t\t\t\t\t} else if (res.code === -8) {\n          } else if (res.code === -10) {\n            console.log('去登陆', res.code)\n          }\n        })\n\t}\n}"]},"metadata":{},"sourceType":"module"}