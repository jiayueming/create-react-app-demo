{"ast":null,"code":"import _objectSpread from \"/Users/nuoee/Desktop/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport http from '../utils/http';\nconst ORDER_ID = 'ORDER_ID';\nconst REFRESH_PRICE = 'REFRESH_PRICE';\nconst initState = {\n  orderId: '',\n  isRefresh: false\n};\nexport function exchange(state = initState, action) {\n  switch (action.type) {\n    case ORDER_ID:\n      return _objectSpread({}, state, {\n        orderId: action.payload.orderId\n      });\n\n    case REFRESH_PRICE:\n      console.log(action.payload);\n      return _objectSpread({}, state, {\n        isRefresh: action.payload.isRefresh\n      });\n\n    default:\n      return state;\n  }\n}\n\nfunction saveOrderId(orderId) {\n  return {\n    type: ORDER_ID,\n    payload: {\n      orderId\n    }\n  };\n}\n\nfunction refreshPrice({\n  isRefresh\n}) {\n  return {\n    type: REFRESH_PRICE,\n    payload: {\n      isRefresh\n    }\n  };\n}\n\nexport function createOrder(data) {\n  return async dispatch => {\n    http.post('exchange-trade-server/order/createOrder', data).then(res => {\n      if (res.code === 200) {\n        dispatch(saveOrderId(res.data.data));\n        this.props.history.push('/pay');\n      } else if (res.code === -1) {\n        dispatch(saveOrderId('270'));\n      } else if (res.code === -8) {\n        dispatch(refreshPrice(true));\n      } else if (res.code === -10) {\n        console.log('去登陆', res.code);\n      }\n    });\n  };\n}","map":{"version":3,"sources":["/Users/nuoee/Desktop/react-demo/src/redux/exchange.redux.js"],"names":["http","ORDER_ID","REFRESH_PRICE","initState","orderId","isRefresh","exchange","state","action","type","payload","console","log","saveOrderId","refreshPrice","createOrder","data","dispatch","post","then","res","code","props","history","push"],"mappings":";AAAA,OAAOA,IAAP,MAAiB,eAAjB;AACA,MAAMC,QAAQ,GAAG,UAAjB;AACA,MAAMC,aAAa,GAAG,eAAtB;AACA,MAAMC,SAAS,GAAG;AACjBC,EAAAA,OAAO,EAAE,EADQ;AAEjBC,EAAAA,SAAS,EAAE;AAFM,CAAlB;AAKA,OAAO,SAASC,QAAT,CAAkBC,KAAK,GAACJ,SAAxB,EAAmCK,MAAnC,EAA0C;AAChD,UAAOA,MAAM,CAACC,IAAd;AACC,SAAKR,QAAL;AACC,+BAAWM,KAAX;AAAiBH,QAAAA,OAAO,EAACI,MAAM,CAACE,OAAP,CAAeN;AAAxC;;AACD,SAAKF,aAAL;AACCS,MAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACE,OAAnB;AACA,+BAAWH,KAAX;AAAiBF,QAAAA,SAAS,EAACG,MAAM,CAACE,OAAP,CAAeL;AAA1C;;AACD;AACC,aAAOE,KAAP;AAPF;AASA;;AACD,SAASM,WAAT,CAAqBT,OAArB,EAA6B;AAC5B,SAAO;AAACK,IAAAA,IAAI,EAAER,QAAP;AAAiBS,IAAAA,OAAO,EAAC;AAACN,MAAAA;AAAD;AAAzB,GAAP;AACA;;AACD,SAASU,YAAT,CAAsB;AAACT,EAAAA;AAAD,CAAtB,EAAkC;AACjC,SAAO;AAACI,IAAAA,IAAI,EAAEP,aAAP;AAAsBQ,IAAAA,OAAO,EAAC;AAACL,MAAAA;AAAD;AAA9B,GAAP;AACA;;AACD,OAAO,SAASU,WAAT,CAAqBC,IAArB,EAA0B;AAChC,SAAO,MAAMC,QAAN,IAAgB;AAChBjB,IAAAA,IAAI,CAACkB,IAAL,CAAU,yCAAV,EAAqDF,IAArD,EAA2DG,IAA3D,CAAgEC,GAAG,IAAI;AACrE,UAAIA,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB;AAC1BJ,QAAAA,QAAQ,CAACJ,WAAW,CAACO,GAAG,CAACJ,IAAJ,CAASA,IAAV,CAAZ,CAAR;AACA,aAAKM,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,MAAxB;AACA,OAHI,MAGE,IAAIJ,GAAG,CAACC,IAAJ,KAAa,CAAC,CAAlB,EAAqB;AAC3BJ,QAAAA,QAAQ,CAACJ,WAAW,CAAC,KAAD,CAAZ,CAAR;AACA,OAFM,MAEA,IAAIO,GAAG,CAACC,IAAJ,KAAa,CAAC,CAAlB,EAAqB;AAC3BJ,QAAAA,QAAQ,CAACH,YAAY,CAAC,IAAD,CAAb,CAAR;AACK,OAFC,MAEK,IAAIM,GAAG,CAACC,IAAJ,KAAa,CAAC,EAAlB,EAAsB;AAC3BV,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBQ,GAAG,CAACC,IAAvB;AACD;AACF,KAXD;AAYN,GAbD;AAcA","sourcesContent":["import http from '../utils/http'\nconst ORDER_ID = 'ORDER_ID'\nconst REFRESH_PRICE = 'REFRESH_PRICE'\nconst initState = {\n\torderId: '',\n\tisRefresh: false\n}\n\nexport function exchange(state=initState, action){\n\tswitch(action.type){\n\t\tcase ORDER_ID:\n\t\t\treturn {...state,orderId:action.payload.orderId}\n\t\tcase REFRESH_PRICE:\n\t\t\tconsole.log(action.payload)\n\t\t\treturn {...state,isRefresh:action.payload.isRefresh}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\nfunction saveOrderId(orderId){\n\treturn {type: ORDER_ID, payload:{orderId}}\n}\nfunction refreshPrice({isRefresh}){\n\treturn {type: REFRESH_PRICE, payload:{isRefresh}}\n}\nexport function createOrder(data){\n\treturn async dispatch=>{\n        http.post('exchange-trade-server/order/createOrder', data).then(res => {\n          if (res.code === 200) {\n\t\t\t\t\t\tdispatch(saveOrderId(res.data.data))\n\t\t\t\t\t\tthis.props.history.push('/pay')\n\t\t\t\t\t} else if (res.code === -1) {\n\t\t\t\t\t\tdispatch(saveOrderId('270'))\n\t\t\t\t\t} else if (res.code === -8) {\n\t\t\t\t\t\tdispatch(refreshPrice(true))\n          } else if (res.code === -10) {\n            console.log('去登陆', res.code)\n          }\n        })\n\t}\n}"]},"metadata":{},"sourceType":"module"}